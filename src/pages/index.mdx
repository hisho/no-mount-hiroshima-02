---
meta:
  title: MDXèª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ
---
import {Presenter} from "@/pages/_template/presenter";


---title: title
center
---
# æ™®æ®µä»•äº‹ã§ä½¿ã£ã¦ã„ã‚‹ä¸‰ç¨®ã®ç¥å™¨


---Presenter
---
import image from '@/pages/_image/profile.jpg'

<Presenter className={'h-full'} imageSrc={image}>
  <div>
    <div className={'mt-10'}>
      <h1 className={'text-40 font-bold leading-1'}>Hisho Ohmasu</h1>
      <p className={'font-bold text-22 mt-1'}>Frontend Developer</p>
    </div>
    <div className={'text-18 mt-12'}>
      <p className={'leading-1.8'}>TypeScriptã¨Next.jsã®App Routerã¨GraphQLãŒå¥½ã</p>
      <p className={'leading-1.8'}>è¶£å‘³ã¯éŸ³æ¥½ã§ã€ã‚ˆããƒ©ã‚¤ãƒ–ã‚„ãƒ•ã‚§ã‚¹ã«è¡Œãã¾ã™ğŸ¤Ÿ</p>
      <p className={'leading-1.8'}>æœ€è¿‘ã®æ¨ã—ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã¯PEOPLE 1ã§ã™ğŸ¶</p>
    </div>
  </div>
</Presenter>

---slide
center
---
# çªç„¶ã§ã™ãŒè³ªå•ã§ã™

---slide
center
---
#### TypeScriptã‚’ä½¿ç”¨ã—ã¦ã„ã¦å‹ã§å›°ã£ãŸçµŒé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ

---slide
center
---
# æœ¬æ—¥ã¯ãã‚“ãª

---slide
center
---
- å‹ãŒanyã§å›°ã£ãŸçµŒé¨“ã‚’æŒã¤æ–¹
- é€”ä¸­ã§å‹ãŒæ¶ˆå¤±ã—ã¦æ­£ã—ãæ¨è«–ã•ã‚Œãªã„çµŒé¨“ã‚’æŒã¤æ–¹

<p className={'mt-2 ml-auto text-right text-20'}>ã®ãŠæ‚©ã¿ã‚’è§£æ±ºã™ã‚‹</p>


---slide
center
---
# ä¸‰ç¨®ã®ç¥å™¨ ğŸ›¡ï¸ğŸ—¡ï¸ğŸº

---slide
center
---
## ç´¹ä»‹ã‚’ã—ã¾ã™


---slide
center
---
# ã‚±ãƒ¼ã‚¹1

---slide
center
---

<div className={'opacity-0'}>
  #### hoge
</div>

```ts
const array = ['item1', 'item2', undefined] // ^? (string | undefined)[]
```

<div className={'opacity-0'}>
  #### hoge
</div>

---slide
center
---

<div className={'text-center'}>
  #### ã“ã®é…åˆ—ã‹ã‚‰undefinedã‚’å–ã‚Šé™¤ããŸã„ğŸ‘‡
</div>

```ts
const array = ['item1', 'item2', undefined] // ^? (string | undefined)[]
```

<div className={'opacity-0'}>
  #### hoge
</div>

---slide
center
---

<div className={'text-center'}>
#### Booleanã§undefinedã‚’æ¶ˆã™ãƒ‘ã‚¿ãƒ¼ãƒ³
</div>

```ts
const result1 = array.filter(Boolean)
```

<div className={'opacity-0'}>
  #### hoge
</div>


---slide
center
---

<div className={'text-center'}>
#### typeofã§undefinedã‚’æ¶ˆã™ãƒ‘ã‚¿ãƒ¼ãƒ³
</div>

```ts
const result2 = array.filter((n) => typeof n !== 'undefined')
```

<div className={'opacity-0'}>
  #### hoge
</div>

---slide
center
---

<div className={'text-center'}>
#### typeofã§stringã ã‘æ®‹ã™ãƒ‘ã‚¿ãƒ¼ãƒ³
</div>

```ts
const result3 = array.filter((n) => typeof n === 'string')
```

<div className={'opacity-0'}>
  #### hoge
</div>

---slide
center
---

<div className={'text-center'}>
#### æ®‹å¿µğŸ™ƒ å…¨éƒ¨(string | undefined)[]ã§æ¨è«–ã•ã‚Œã‚‹ã‚ˆğŸ¤¯
</div>

```ts
const result1 = array.filter(Boolean) // ^? (string | undefined)[]
const result2 = array.filter((n) => typeof n !== 'undefined') // ^? (string | undefined)[]
const result3 = array.filter((n) => typeof n === 'string') // ^? (string | undefined)[]
```

<div className={'opacity-0'}>
  #### hoge
</div>


---slide
center
---

<h1 className={'text-80 text-center'}>ğŸ¤”</h1>


---slide
center
---

<div className={'text-center'}>
  #### æ­£ã—ãæ¨è«–ã•ã›ã‚‹ã®ã«ã¯ã“ã®ã‚ˆã†ã«æ›¸ãå¿…è¦ãŒã‚ã‚‹ğŸ‘‡
</div>

```ts
const result1 = array.filter((n): n is string => Boolean(n)) // ^? string[]
const result2 = array.filter((n): n is string => typeof n !== 'undefined') // ^? string[]
const result3 = array.filter((n): n is string => typeof n === 'string') // ^? string[]
```

<div className={'opacity-0'}>
  #### hoge
</div>

---slide
center
---
<div className={'text-center'}>
  # ğŸ¤”
</div>

```ts
const result2 = array.filter((n): n is string => typeof n === 'undefined') // ^? string[]
```

<div className={'opacity-0'}>
  # hoge
</div>


---slide
center
---

<div className={'text-center'}>
  # ãã“ã§ä»Šå›ç´¹ä»‹ã™ã‚‹ã®ã¯
</div>


---slide
center
---

<div className={'text-center'}>
  # typesafe-utils
</div>
<a className={'absolute right-8 bottom-8 text-12 text-blue-500 hover:underline'} target={'_blank'} href="https://github.com/ivanhofer/typesafe-utils">https://github.com/ivanhofer/typesafe-utils</a>

---slide
center
---
<div className={'text-center'}>
  # ğŸ˜€
</div>

```ts
import { isNotUndefined, isString } from 'typesafe-utils'
const result1 = array.filter(isString) // ^? string[]
const result2 = array.filter(isNotUndefined) // ^? string[]
```

<div className={'opacity-0'}>
  # hoge
</div>

---slide
center
---
# ã‚±ãƒ¼ã‚¹2

---slide
center
---
<div className={'text-center'}>
  ##### "noUncheckedIndexedAccess": trueã®å ´åˆstring | undefinedã«ãªã‚‹ğŸ‘‡
</div>

```ts
const nonEmptyArray = ['hi']

if (!!nonEmptyArray.length) {
  const result = nonEmptyArray[0]?.toUpperCase() // ^? string | undefined
}
```

<div className={'opacity-0'}>
  ##### hoge
</div>

---slide
center
---
<div className={'text-center'}>
  ##### typesafe-utilsã‚’ä½¿ã†ã¨stringã«ãªã‚‹ğŸ˜€
</div>

```ts
import { isArrayNotEmpty } from 'typesafe-utils'
const nonEmptyArray = ['hi']

if (isArrayNotEmpty(nonEmptyArray)) {
  const result = nonEmptyArray[0].toUpperCase() // ^? string
}
```

<div className={'opacity-0'}>
  ##### hoge
</div>

---slide
center
---
import image from '@/pages/_image/typesafe-utils.png';

<div className={'flex-1 w-full overflow-auto'}>
  <div className={'aspect-[1788/6495] relative w-full'}>
    <img className={'absolute inset-0 w-full'} src={image} />
  </div>
</div>

---slide
center
---

## ç¥å™¨1
# typesafe-utils

---slide
center
---

<div className={'text-center'}>
# ã‚±ãƒ¼ã‚¹3
</div>

---slide
center
---


<div className={'text-center'}>
# ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã‚’æŒã¡è¾¼ã¿ãŸã„
</div>


---slide
center
---

<div className={'text-center'}>
  # ãã“ã§æ¬¡ã«ä»Šå›ç´¹ä»‹ã™ã‚‹ã®ã¯
</div>


---slide
center
---

<div className={'text-center'}>
  # ts-pattern
</div>
<a className={'absolute right-8 bottom-8 text-12 text-blue-500 hover:underline'} target={'_blank'} href="https://github.com/gvergnaud/ts-pattern">https://github.com/gvergnaud/ts-pattern</a>


---slide
center
---

<div className={'text-center'}>
  # ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¨ã¯ï¼ŸğŸ¤”
</div>

---slide
center
---


<div className={'text-center'}>
  #### ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ç‰¹å®šã®ã€Œãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã—ã€<br />ãã®å½¢çŠ¶ã‚„å†…å®¹ã«å¿œã˜ã¦å‡¦ç†ã‚’åˆ†å²ã™ã‚‹æŠ€è¡“ã€‚
</div>


---slide
center
---
import image from '@/pages/_image/space-cat.jpg';

<img className={'absolute inset-0 w-full'} src={image} />


---slide
center
---

<div className={'text-center'}>
  # ã¾ãšã¯ã“ã®å‹•ç”»ã‚’è¦‹ã¦ã»ã—ã„
</div>

---slide
center
---
![image](https://user-images.githubusercontent.com/9265418/231688650-7cd957a9-8edc-4db8-a5fe-61e1c2179d91.gif)

---slide
center
---

<div className={'text-center'}>
# ä½•ãŒå¬‰ã—ã„ï¼ŸğŸ¤”
</div>

---slide
center
---

<div className={'text-left'}>
##### ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§å‘ä¸Š: ç›´æ„Ÿçš„ãªæ§‹æ–‡ã§è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å‡¦ç†ã€‚
##### å®‰å…¨æ€§: å…¨ã¦ã®ã‚±ãƒ¼ã‚¹ã‚’ç¶²ç¾…çš„ã«æ‰±ã†ã“ã¨ã§ã€æœªå‡¦ç†ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹ãƒã‚°ã‚’é¿ã‘ã‚‹ã€‚
</div>


---slide
center
---
import image from '@/pages/_image/ts-pattern-1.jpg';

<img className={'absolute inset-0 w-full'} src={image} />

---slide
center
---
import image from '@/pages/_image/ts-pattern-2.jpg';

<img className={'absolute inset-0 w-full'} src={image} />

---slide
center
---
import image from '@/pages/_image/ts-pattern-3.jpg';

<img className={'absolute inset-0 w-full'} src={image} />

---slide
center
---

<div className={'text-center'}>
  # ãã®ä»–ã«ã‚‚
</div>


---slide
center
---

```ts
type Animal = { type: 'dog', name: string } | { type: 'cat', age: number };
```


---slide
center
---

```ts
function describeAnimalWithIf(animal: Animal): string {
  if (animal.type === 'dog') {
    return `This is a dog named ${animal.name}`;
  } else if (animal.type === 'cat') {
    return `This is a cat that is ${animal.age} years old`;
  }
  return 'Unknown animal type';
}
```

---slide
center
---

```ts
function describeAnimalWithSwitch(animal: Animal): string {
  switch (animal.type) {
    case 'dog':
      return `This is a dog named ${animal.name}`;
    case 'cat':
      return `This is a cat that is ${animal.age} years old`;
    default:
      return 'Unknown animal type';
  }
}
```

---slide
center
---

```ts
const descriptionWithTernary = animal.type === 'dog'
  ? `This is a dog named ${animal.name}`
  : animal.type === 'cat'
  ? `This is a cat that is ${animal.age} years old`
  : 'Unknown animal type';
```

---slide
center
---

```ts
import { match } from 'ts-pattern';

const descriptionWithPattern = match<Animal>(animal)
  .with({ type: 'dog' }, ({name}) => `This is a dog named ${name}`)
  .with({ type: 'cat' }, ({age}) => `This is a cat that is ${age} years old`)
  .exhaustive();
```

---slide
center
---

```ts
type Animal =
  | { age: number; type: 'cat' }
  | { name: string; type: 'dog' }
  | { type: 'bird'; wingspan: number } // æ–°ãŸã«birdã‚’è¿½åŠ 
```


---slide
center
---

```ts
import { match } from 'ts-pattern';

const descriptionWithPattern = match<Animal>(animal)
  .with({ type: 'dog' }, ({ name }) => `This is a dog named ${name}`)
  .with(
    { type: 'cat' },
    ({ age }) => `This is a cat that is ${age} years old`
  )
  .exhaustive()
```

```ts
TS2349: This expression is not callable.
Type
NonExhaustiveError<{   type: "bird";   wingspan: number; }>
has no call signatures.
```


---slide
center
---

<div className={'text-center'}>
  ### ts-patternãªã‚‰ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦ãã‚Œã‚‹ğŸ˜€
</div>

---slide
center
---

## ç¥å™¨2
# ts-pattern


---slide
center
---

<div className={'text-center'}>
  # ã‚±ãƒ¼ã‚¹4
</div>


---slide
center
---

<div className={'text-center'}>
  # TypeScriptã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
</div>

---slide
center
---
import image from '@/pages/_image/zod-logo.png';

<img className={'w-100 animate-rotate hover:animate-none'} src={image} />

<div className={'text-center'}>
  # Zod
</div>
<a className={'absolute right-8 bottom-8 text-12 text-blue-500 hover:underline'} target={'_blank'} href="https://github.com/colinhacks/zod">https://github.com/colinhacks/zod</a>

---slide
center
---

<div className={'text-center'}>
#### TypeScript-first schema validation with static type inference
</div>

---slide
center
---

<div className={'text-center'}>
  #### TypeScript-first <span className={'text-red-500'}>schema validation with static type inference</span>
</div>

---slide
center
---

<div className={'text-center'}>
  #### ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¨å…±ã«å‹ã‚‚ã§ãã‚‹ğŸ‘‡
</div>

```ts
import { z } from "zod";

const User = z.object({
  username: z.string(),
});

User.parse({ username: "Ludwig" });

// extract the inferred type
type User = z.infer<typeof User>;// ^? { username: string }
```

<div className={'opacity-0'}>
  #### hoge
</div>


---slide
center
---

<div className={'text-center'}>
  #### å€¤ã‚’å¾Œã‹ã‚‰åŠ å·¥ã™ã‚‹
</div>

```ts
import { z } from 'zod'

const User = z
  .object({
    email: z.string().optional(),
    username: z.string(),
  })
  .transform(({ email, username }) => ({
    username: username.toLowerCase(),
    email: email ? email : 'æœªè¨­å®š',
  }))

const user = User.parse({ username: 'Ludwig' }) // { username: 'ludwig', email: 'æœªè¨­å®š' }

type User = z.infer<typeof User> // ^? {email: string, username: ZodString["_output"]}
```

<div className={'opacity-0'}>
  #### hoge
</div>

---slide
center
---

<div className={'text-center'}>
  #### å€¤ã‚’å…ˆã«åŠ å·¥ã™ã‚‹
</div>

```ts
import { z } from 'zod'

const User = z
  .object({
    age: z.coerce.number(),
    username: z.string(),
  })

// { age: 20, username: 'Ludwig' }
const user = User.parse({ age: '20', username: 'Ludwig' })

// ^? {age: ZodNumber["_output"], username: ZodString["_output"]}
type User = z.infer<typeof User>
```

<div className={'opacity-0'}>
  #### hoge
</div>

---slide
center
---

<div className={'text-center'}>
  #### ã©ã‚“ãªå€¤ã§ã‚‚å‹ã‚¬ãƒ¼ãƒ‰ã§ãã‚‹ğŸ™‹â€â™‚ï¸
</div>

```ts
import { z } from 'zod'

const User = z.object({
  userName: z.string(),
})

const result = User.safeParse('Ludwig')

if (!result.success) {
  return
}

// result ^? { username: 'Ludwig' }
```

<div className={'opacity-0'}>
  #### hoge
</div>


---slide
center
---
import image from '@/pages/_image/space-cat.jpg';

<img className={'absolute inset-0 w-full'} src={image} />

---slide
center
---
<div className={'text-center'}>
  # Zodã¯å®‡å®™
</div>


---slide
center
---

## ç¥å™¨3
# Zod


---slide
center
---

# ãŠã¾ã‘

---slide
center
---

<div className={'text-center'}>
  # t3-env
</div>
<a className={'absolute right-8 bottom-8 text-12 text-blue-500 hover:underline'} target={'_blank'} href="https://github.com/t3-oss/t3-env">https://github.com/t3-oss/t3-env</a>


---slide
center
---

#### tRPCã®envãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ¼ãƒ³ç‰ˆ

---slide
center
---

```ts
import { createEnv } from '@t3-oss/env-nextjs'
import { z } from 'zod'

export const env = createEnv({
  client: {
    NEXT_PUBLIC_NODE_ENV: z.enum(['development', 'production'] as const),
  },
  runtimeEnv: {
    NEXT_PUBLIC_NODE_ENV: process.env['NODE_ENV'],
    NODE_ENV: process.env['NODE_ENV'],
  },
  server: {
    NODE_ENV: z.enum(['development', 'production'] as const),
  },
})
```

---slide
center
---

```ts
import { env } from '@/src/env'

const NODE_ENV = env.NODE_ENV // ^? 'development' | 'production'
```

---slide
center
---

##### Next.jsç‰ˆãŒã‚ã‚‹ã®ã§ãœã²ä½¿ãŠã†ï¼ï¼
##### å…¬å¼ã§ã¯mjsã ãŒæ‹¡å¼µå­ã¯tsã§ã‚‚ä½¿ç”¨å¯èƒ½


---slide
center
---

## ã“ã‚Œã§ã‚ãªãŸã‚‚ã‚¬ãƒã‚¬ãƒå‹ãƒã‚¹ã‚¿ãƒ¼ğŸ˜

---slide
center
---

# çµ‚ã‚ã‚Š